# Обзор целевой архитектуры

Цель — упорядочить систему типов вокруг одного «источника правды» и чистых границ между слоями.

## Слои
```
Data Layer        — парсеры и репозиторий типов
Domain Layer      — сервис разрешения типов + резолверы
Application Layer — специализированные сервисы (LSP/Web/CLI)
Presentation      — интерфейсы/адаптеры под протоколы и HTTP
```

## Ключевые компоненты
- TypeRepository: хранение сырых данных о типах (Platform/Config/User)
- TypeResolutionService: центральный сервис домена, объединяющий резолверы
- Resolvers: Platform/Configuration/Builtin/Expression/Code
- LspTypeService/WebTypeService/AnalysisTypeService: прикладные сервисы
- Интерфейсы: LSP/Web/CLI адаптеры без бизнес‑логики

## Центральная система
Центральный объект агрегирует все слои, предоставляет фабрики интерфейсов и контролирует инициализацию/метрики. Подробности — в `central_type_system.md`.

## Отличия от текущего кода
- Единый репозиторий типов вместо разрозненных поставщиков
- Один сервис разрешения типов, резолверы как плагины
- Разделение сервисов (Application) и интерфейсов (Presentation)

## Принципы
- Single Source of Truth для данных о типах
- Открытость для расширения через trait‑интерфейсы
- Обратная совместимость и поэтапное включение

