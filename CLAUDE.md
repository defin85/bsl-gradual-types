# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## üéØ –û –ø—Ä–æ–µ–∫—Ç–µ

**BSL Gradual Type System** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤ –¥–ª—è —è–∑—ã–∫–∞ 1–°:–ü—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–µ BSL, –æ–±—ä–µ–¥–∏–Ω—è—é—â–∞—è —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ —Å runtime –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –≥—Ä–∞–¥—É–∞–ª—å–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é.

### –ü–æ—á–µ–º—É –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π?
–≠—Ç–æ 5-—è –∏—Ç–µ—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤. –ü–æ—Å–ª–µ 4 –ø–æ–ø—ã—Ç–æ–∫ –≤ `bsl_type_safety_analyzer` —Ä–µ—à–∏–ª–∏ –Ω–∞—á–∞—Ç—å —Å —á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞, –≤–∑—è–≤ –ª—É—á—à–µ–µ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤:
- –§–∞—Å–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∏–∑ Unified Type System v2
- –ì—Ä–∞–¥—É–∞–ª—å–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è –æ—Ç Grock
- –≠–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ —Ä–∞–∑–≤–∏—Ç–∏—è

## üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

1. **Core Layer** (`src/core/`)
   - `types.rs` - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è TypeResolution —Å —É—Ä–æ–≤–Ω—è–º–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ (Known, Inferred, Unknown)
     - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ `ConcreteType::GlobalFunction`
   - `resolution.rs` - pipeline —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Ç–∏–ø–æ–≤ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏
   - `facets.rs` - —Å–∏—Å—Ç–µ–º–∞ —Ñ–∞—Å–µ—Ç–æ–≤ –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö (Manager, Object, Reference, Metadata)
   - `contracts.rs` - runtime –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
   - `context.rs` - –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
   - `dependency_graph.rs` - –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ç–∏–ø–æ–≤ —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º —Ü–∏–∫–ª–æ–≤
   - `type_checker.rs` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
   - `standard_types.rs` - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ —Ç–∏–ø—ã BSL
   - `type_narrowing.rs` - —É—Ç–æ—á–Ω–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –≤ —É—Å–ª–æ–≤–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö (Phase 4.0)
   - **Advanced Analysis (Phase 4.6):**
     - `flow_sensitive.rs` - flow-sensitive –∞–Ω–∞–ª–∏–∑ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π
     - `union_types.rs` - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ Union —Ç–∏–ø–æ–≤ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π
     - `interprocedural.rs` - –º–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —á–µ—Ä–µ–∑ –≥—Ä–∞–Ω–∏—Ü—ã —Ñ—É–Ω–∫—Ü–∏–π

2. **Analysis Layer** 
   - **Parser** (`src/parser/`)
     - `tree_sitter_adapter.rs` - –∞–¥–∞–ø—Ç–µ—Ä –¥–ª—è tree-sitter-bsl –ø–∞—Ä—Å–µ—Ä–∞
     - `ast.rs` - Abstract Syntax Tree
     - `visitor.rs` - Visitor pattern –¥–ª—è –æ–±—Ö–æ–¥–∞ AST
     - `graph_builder.rs` - –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
     - `common.rs` - –æ–±—â–∏–π trait Parser –∏ —Ñ–∞–±—Ä–∏–∫–∞
   - **Query Parser** (`src/query/`)
     - `parser.rs` - –ø–∞—Ä—Å–µ—Ä —è–∑—ã–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ 1–°
     - `ast.rs` - AST –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤
     - `batch.rs` - –ø–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
     - `type_checker.rs` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö

3. **Adapter Layer** (`src/adapters/`)
   - `config_parser_xml.rs` - –ø–∞—Ä—Å–µ—Ä Configuration.xml
   - `syntax_helper_parser.rs` - –ø–∞—Ä—Å–µ—Ä —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
   - `platform_types_v2.rs` - —Ä–µ–∑–æ–ª–≤–µ—Ä –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞
   - `facet_cache.rs` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞—Å–µ—Ç–æ–≤

4. **Application Layer** (`src/bin/`)
   - `analyzer.rs` - CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ BSL —Ñ–∞–π–ª–æ–≤
   - `lsp_server.rs` - Language Server Protocol —Å–µ—Ä–≤–µ—Ä
   - `build_index.rs` - —É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ —Ç–∏–ø–æ–≤
   - `type_check.rs` - CLI –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤

### –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏

**TypeResolution** - –Ω–µ —Ç–∏–ø, –∞ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —Ç–∏–ø–∞ —Å —É—Ä–æ–≤–Ω–µ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:
```rust
pub struct TypeResolution {
    certainty: Certainty,        // Known | Inferred(0.0-1.0) | Unknown
    result: ResolutionResult,     // Concrete | Union | Conditional | Dynamic
    source: ResolutionSource,     // Static | Inferred | Runtime | Predicted
    metadata: ResolutionMetadata, // Debug info
}
```

**–§–∞—Å–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** - –æ–¥–∏–Ω —Ç–∏–ø –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ä–∞–∑–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è:
- **Manager**: `–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã` - –º–µ–Ω–µ–¥–∂–µ—Ä –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–æ–º
- **Object**: `–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–û–±—ä–µ–∫—Ç.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã` - –∏–∑–º–µ–Ω—è–µ–º—ã–π –æ–±—ä–µ–∫—Ç
- **Reference**: `–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–°—Å—ã–ª–∫–∞.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç
- **Metadata**: `–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ.–°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏.–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—ã` - –æ–ø–∏—Å–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–¢—Ä–∏ —Ç–∏–ø–∞ —Ñ—É–Ω–∫—Ü–∏–π –≤ BSL**:
1. **–ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã** - –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ú–∏–Ω, –ú–∞–∫—Å, –°—Ç—Ä–æ–∫–∞)
   - –•—Ä–∞–Ω—è—Ç—Å—è —á–µ—Ä–µ–∑ `ConcreteType::GlobalFunction`
   - –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞
2. **–ú–µ—Ç–æ–¥—ã –æ–±—ä–µ–∫—Ç–æ–≤** - –º–µ—Ç–æ–¥—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ (–¢–∞–±–ª–∏—Ü–∞–ó–Ω–∞—á–µ–Ω–∏–π.–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ)
   - –ü—Ä–∏–≤—è–∑–∞–Ω—ã –∫ —Ç–∏–ø—É —á–µ—Ä–µ–∑ `PlatformType.methods`
3. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏** - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –∫–æ–¥–µ BSL
   - –ü–∞—Ä—Å—è—Ç—Å—è –∏–∑ AST –∫–∞–∫ `FunctionDecl`
   - –¢–∏–ø—ã –≤—ã–≤–æ–¥—è—Ç—Å—è —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - –£—á–∞—Å—Ç–≤—É—é—Ç –≤ –≥—Ä–∞—Ñ–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –°–º. [Function Types Hierarchy](docs/architecture/function_types_hierarchy.md)

## üîß –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –°–±–æ—Ä–∫–∞ –∏ –∫–æ–º–ø–∏–ª—è—Ü–∏—è
```bash
# –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
cargo build

# –°–±–æ—Ä–∫–∞ —Ä–µ–ª–∏–∑–Ω–æ–π –≤–µ—Ä—Å–∏–∏ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏
cargo build --release

# –ë—ã—Å—Ç—Ä–∞—è —Å–±–æ—Ä–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —É—Ä–æ–≤–Ω—è 1)
cargo build --profile=dev-fast

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –±–µ–∑ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
cargo check

# –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞
cargo fmt

# –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞
cargo clippy -- -D warnings
```

### –ó–∞–ø—É—Å–∫ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
```bash
# –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä BSL —Ñ–∞–π–ª–æ–≤
cargo run --bin bsl-analyzer -- --file module.bsl --config /path/to/config

# LSP —Å–µ—Ä–≤–µ—Ä –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å IDE
cargo run --bin lsp-server

# –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞ —Ç–∏–ø–æ–≤ –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
cargo run --bin build-index -- --config /path/to/config --platform-version 8.3.25

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤
cargo run --bin type-check -- --file module.bsl
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
cargo test

# –¢–æ–ª—å–∫–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
cargo test --test "*"

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
cargo test --test query_parser_test

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ —Å –≤—ã–≤–æ–¥–æ–º print statements
cargo test -- --nocapture

# –ü—Ä–æ–≤–µ—Ä–∫–∞ snapshot —Ç–µ—Å—Ç–æ–≤ (insta)
cargo insta test
cargo insta review
```

### –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
```bash
# –û—Å–Ω–æ–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤
cargo run --example visualize_parser_v3         # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –≤–∫–ª–∞–¥–∫–∞–º–∏ –∏ —Ñ–∞—Å–µ—Ç–∞–º–∏

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
cargo run --example query_demo

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –ø–∞—Ä—Å–µ—Ä–∞ —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞
cargo run --example syntax_helper_unified_demo  # –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä
cargo run --example syntax_helper_parser_demo   # –î–µ–º–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞
cargo run --example syntax_helper_v3_demo       # –î–µ–º–æ –≤–µ—Ä—Å–∏–∏ 3

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏ —Ç–∏–ø–æ–≤
cargo run --example test_categories             # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
cargo run --example test_completion             # –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –ø—Ä–∏–º–µ—Ä–æ–≤
cargo run --example
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í—Å—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `docs/`:
- `docs/ARCHITECTURE.md` - –≥–ª–∞–≤–Ω—ã–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
- `docs/MIGRATION_PLAN.md` - –ø–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –∫–æ–¥–∞ –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
- `docs/architecture/` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `docs/design/` - –¥–∏–∑–∞–π–Ω-–¥–æ–∫—É–º–µ–Ω—Ç—ã
- `docs/decisions/` - –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω—è—Ç—ã—Ö —Ä–µ—à–µ–Ω–∏–π

## üìä –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é HTML –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤:

```bash
# –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤
cargo run --example visualize_parser_v3
```

–°–æ–∑–¥–∞—ë—Ç `type_hierarchy_v3_visualization.html` —Å:
- üìë **–í–∫–ª–∞–¥–∫–∞–º–∏**: –¢–∏–ø—ã, –ò–Ω–¥–µ–∫—Å—ã, –§–∞—Å–µ—Ç—ã
- üîç **–ü–æ–∏—Å–∫–æ–º** –ø–æ —Ç–∏–ø–∞–º –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π**: 4361 —Ç–∏–ø, 276 –∫–∞—Ç–µ–≥–æ—Ä–∏–π, 6975 –º–µ—Ç–æ–¥–æ–≤, 13357 —Å–≤–æ–π—Å—Ç–≤
- üéØ **–°–∏—Å—Ç–µ–º–æ–π —Ñ–∞—Å–µ—Ç–æ–≤** (Manager, Object, Reference)
- üåê **–î–≤—É—è–∑—ã—á–Ω—ã–º–∏ –∏–Ω–¥–µ–∫—Å–∞–º–∏** (—Ä—É—Å—Å–∫–∏–π/–∞–Ω–≥–ª–∏–π—Å–∫–∏–π)

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [docs/implementation/visualization.md](docs/implementation/visualization.md)

## üöÄ –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

**–¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è**: 0.6.0  
**–¢–µ–∫—É—â–∞—è —Ñ–∞–∑–∞**: Phase 4.6 ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê  
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**: 18 –Ø–Ω–≤–∞—Ä—è 2025

### –°–≤–æ–¥–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:
- ‚úÖ **Phase 1 (MVP)** - –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–∏–ø–æ–≤
- ‚úÖ **Phase 2** - –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ AST
- ‚úÖ **Phase 3** - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ **Phase 3.5** - –ü–∞—Ä—Å–µ—Ä —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤ LSP
- ‚úÖ **Phase 3.6** - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏ —É–ª—É—á—à–µ–Ω–∏–µ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ **Phase 4** - –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (Type narrowing, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- ‚úÖ **Phase 4.5** - –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ tree-sitter-bsl
- ‚úÖ **Phase 4.6** - –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤ (Flow-sensitive, Union types, –ú–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑)

**Phase 1 (MVP)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏
- ‚úÖ TypeResolution —Å —É—Ä–æ–≤–Ω—è–º–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏  
- ‚úÖ –ü–æ–ª–Ω–∞—è —Ñ–∞—Å–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (Manager, Object, Reference, Constructor)
- ‚úÖ –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –¥–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ (—Ö–∞—Ä–¥–∫–æ–¥ —Å TODO)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ Configuration.xml —Å —Ç–∞–±–ª–∏—á–Ω—ã–º–∏ —á–∞—Å—Ç—è–º–∏
- ‚úÖ LSP —Å–µ—Ä–≤–µ—Ä —Å hover –∏ completion
- ‚úÖ –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∏.* –∏ –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤

**Phase 2 (–ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ü–∞—Ä—Å–µ—Ä BSL –Ω–∞ –æ—Å–Ω–æ–≤–µ nom
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è AST (Abstract Syntax Tree)
- ‚úÖ –ì—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Ç–∏–ø–æ–≤ —Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ–º —Ü–∏–∫–ª–æ–≤
- ‚úÖ Type checker —Å –≤—ã–≤–æ–¥–æ–º —Ç–∏–ø–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Ç–∏–ø–æ–≤
- ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –≤ LSP (–æ—à–∏–±–∫–∏, –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è)

**Phase 3 (–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ü–∞—Ä—Å–µ—Ä —è–∑—ã–∫–∞ –∑–∞–ø—Ä–æ—Å–æ–≤ 1–°
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∏–º—ë–Ω —Ç–∞–±–ª–∏—Ü (–î–æ–∫—É–º–µ–Ω—Ç.–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–¢–æ–≤–∞—Ä–æ–≤–£—Å–ª—É–≥)
- ‚úÖ –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã (–ü–û–ú–ï–°–¢–ò–¢–¨/–ò–ó –í–¢_)
- ‚úÖ –ü–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ JOIN –æ–ø–µ—Ä–∞—Ü–∏–∏ (–õ–ï–í–û–ï/–ü–†–ê–í–û–ï/–ü–û–õ–ù–û–ï/–í–ù–£–¢–†–ï–ù–ù–ï–ï –°–û–ï–î–ò–ù–ï–ù–ò–ï)
- ‚úÖ –ê–≥—Ä–µ–≥–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ GROUP BY
- ‚úÖ –ü–æ–¥–∑–∞–ø—Ä–æ—Å—ã –∏ UNION
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Ç–∏–ø–æ–≤

**Phase 3.5 (–ü–∞—Ä—Å–µ—Ä —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ü–∞—Ä—Å–µ—Ä ZIP –∞—Ä—Ö–∏–≤–æ–≤ —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞ (rebuilt.shcntx_ru.zip, rebuilt.shlang_ru.zip)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ –∏—Ö —Å–∏–≥–Ω–∞—Ç—É—Ä (476 —Ñ—É–Ω–∫—Ü–∏–π)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —è–∑—ã–∫–∞ —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–µ–π (22 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö (60 –æ–±—ä–µ–∫—Ç–æ–≤)
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π (712 –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ (5617 –º–µ—Ç–æ–¥–æ–≤)
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–æ–≤ (12044 —Å–≤–æ–π—Å—Ç–≤–∞)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ TypeRef –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∏–ø–æ–≤ (language:, context:, metadata_ref:)
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ñ–∞—Å–µ—Ç–æ–≤ –∏–∑ –∏–º—ë–Ω —Ç–∏–ø–æ–≤ (CatalogManager ‚Üí Manager)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å FacetRegistry –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ñ–∞—Å–µ—Ç–æ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞—Å–µ—Ç–æ–≤ (FacetCache —Å 30-–¥–Ω–µ–≤–Ω–æ–π –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å—é)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å PlatformTypesResolverV2
- ‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–µ–π —è–∑—ã–∫–æ–≤—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –≤ LSP –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (476 —Ñ—É–Ω–∫—Ü–∏–π, –º–µ—Ç–æ–¥—ã –∏ —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤)

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–∞—Ä—Å–∏–Ω–≥–∞**:
- 476 –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏
- 60 –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (Array, String, Map –∏ –¥—Ä.)
- 712 —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–π —Å –∏—Ö –∑–Ω–∞—á–µ–Ω–∏—è–º–∏
- 5617 –º–µ—Ç–æ–¥–æ–≤ –æ–±—ä–µ–∫—Ç–æ–≤ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–º–∏ —Ç–∏–ø–∞–º–∏
- 12044 —Å–≤–æ–π—Å—Ç–≤–∞ –æ–±—ä–µ–∫—Ç–æ–≤ —Å —Ç–∏–ø–∞–º–∏
- 22 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è: "–û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —è–∑—ã–∫–∞" ‚Üí –ø–æ–¥–∫–∞—Ç–µ–≥–æ—Ä–∏–∏

**Phase 3.6 (–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä—Å–µ—Ä–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ú–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Å rayon (—É–ª—É—á—à–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ 4-8 —Ä–∞–∑)
- ‚úÖ –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è 4 –≤–µ—Ä—Å–∏–π –ø–∞—Ä—Å–µ—Ä–∞ –≤ –µ–¥–∏–Ω—É—é —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –∏–∑ catalog*.html —Ñ–∞–π–ª–æ–≤
- ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã—Ö –Ω–∞–∑–≤–∞–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π (276 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ç–∏–ø–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- ‚úÖ –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è HTML –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å –∏–µ—Ä–∞—Ä—Ö–∏–µ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- ‚úÖ –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ –í–∏–∑—É–∞–ª—å–Ω–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Ç–æ–ø-–∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ç–∏–ø–æ–≤

**–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤**:
- 276 –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
- 4361 —Ç–∏–ø–æ–≤
- 476 –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π (27 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
- 6975 –º–µ—Ç–æ–¥–æ–≤
- 13357 —Å–≤–æ–π—Å—Ç–≤
- 4 –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–ú–∏–Ω, –ú–∞–∫—Å, –°—Ç—Ä–æ–∫–∞, –ß–∏—Å–ª–æ)
- 12 —á–∏—Å—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

**Phase 4 (–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∞–Ω–∞–ª–∏–∑)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–∏–ø–∞
  - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `ConcreteType::GlobalFunction` –≤ —Å–∏—Å—Ç–µ–º—É —Ç–∏–ø–æ–≤
  - ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–π –≤—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–π –ú–∏–Ω/–ú–∞–∫—Å/–°—Ç—Ä–æ–∫–∞/–ß–∏—Å–ª–æ
  - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ 476 –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–∑ —Å–∏–Ω—Ç–∞–∫—Å-–ø–æ–º–æ—â–Ω–∏–∫–∞
  - ‚úÖ –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞ –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω—ã–µ (4) –∏ —á–∏—Å—Ç—ã–µ (12)
  - ‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Ñ—É–Ω–∫—Ü–∏–π (27 –∫–∞—Ç–µ–≥–æ—Ä–∏–π)
  - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ LSP —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º CompletionItemKind::FUNCTION
  - ‚úÖ –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º –≤ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚úÖ Type narrowing –≤ —É—Å–ª–æ–≤–Ω—ã—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è—Ö
  - ‚úÖ –ê–Ω–∞–ª–∏–∑ —É—Å–ª–æ–≤–∏–π –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è —Ç–∏–ø–æ–≤
  - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ–∫ `–¢–∏–ø–ó–Ω—á(x) = –¢–∏–ø("–¢–∏–ø")`
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ `–ù–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ` –∏ `Null`
  - ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ type checker —á–µ—Ä–µ–∑ `visit_if`
  - ‚úÖ Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

**Phase 4.5 (–ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ tree-sitter-bsl)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è tree-sitter-bsl —á–µ—Ä–µ–∑ Rust –±–∏–Ω–¥–∏–Ω–≥–∏ (tree-sitter 0.25)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–∞ –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ tree-sitter AST –≤ –Ω–∞—à —Ñ–æ—Ä–º–∞—Ç (~850 —Å—Ç—Ä–æ–∫)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –∏ –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–∏–≤
- ‚úÖ –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö BSL –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–π (—Ü–∏–∫–ª—ã, —É—Å–ª–æ–≤–∏—è, —Ñ—É–Ω–∫—Ü–∏–∏, –ø—Ä–æ—Ü–µ–¥—É—Ä—ã)
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤ –Ω–∞ –Ω–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä (33 —Ç–µ—Å—Ç–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ legacy –∫–æ–¥–∞ –∏ —É–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ Parser trait –¥–ª—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏–∏ –Ω–∞–¥ –ø–∞—Ä—Å–µ—Ä–∞–º–∏
- ‚úÖ ParserFactory —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç tree-sitter –ø–∞—Ä—Å–µ—Ä
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ (–±–∞–∑–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)

**Phase 4.6 (–ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –∞–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–ê:
- ‚úÖ **Flow-sensitive –∞–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
  - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–æ—Ç–æ–∫–∞ –∏ –∏—Ö –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ —Ç–æ—á–∫–∞—Ö —Å–ª–∏—è–Ω–∏—è (FlowState, StateId)
  - ‚úÖ –ê–Ω–∞–ª–∏–∑ —É—Å–ª–æ–≤–Ω—ã—Ö –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π type narrowing
  - ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ if-then-else —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –≤ —Ä–∞–∑–Ω—ã—Ö –≤–µ—Ç–∫–∞—Ö
  - ‚úÖ 6 comprehensive —Ç–µ—Å—Ç–æ–≤ –ø–æ–∫—Ä—ã–≤–∞—é—â–∏—Ö –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ **–ü–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–µ Union —Ç–∏–ø—ã** - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ union —Ç–∏–ø–æ–≤ —Å –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–µ–π
  - ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≤–∑–≤–µ—à–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è BSL-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–º–∏
  - ‚úÖ –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è (—É–±—Ä–∞—Ç—å –¥—É–±–ª–∏–∫–∞—Ç—ã, –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤–µ—Å–∞)
  - ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∏–µ union —Ç–∏–ø–æ–≤ (—á–∏—Å–ª–æ–≤—ã–µ ‚Üí Number, —Å—Ç—Ä–æ–∫–æ–≤—ã–µ ‚Üí String)
  - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –ø–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–∏–±–æ–ª–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞
  - ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ union —Ç–∏–ø–æ–≤
  - ‚úÖ 10 comprehensive —Ç–µ—Å—Ç–æ–≤ —Å –ø–æ–ª–Ω—ã–º –ø–æ–∫—Ä—ã—Ç–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ **–ú–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑** - –∞–Ω–∞–ª–∏–∑ —Ç–∏–ø–æ–≤ —á–µ—Ä–µ–∑ –≥—Ä–∞–Ω–∏—Ü—ã —Ñ—É–Ω–∫—Ü–∏–π
  - ‚úÖ –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –≤—ã–∑–æ–≤–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø—Ä–æ—Ü–µ–¥—É—Ä (CallGraph)
  - ‚úÖ –¢–æ–ø–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –∞–Ω–∞–ª–∏–∑–∞
  - ‚úÖ –í—ã–≤–æ–¥ —Ç–∏–ø–æ–≤ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–π —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏–∑ –∏—Ö —Ç–µ–ª–∞
  - ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ –∏ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
  - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ç–∏–ø–æ–≤ —Å —Å–∏–≥–Ω–∞—Ç—É—Ä–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–π
  - ‚úÖ 3 unit —Ç–µ—Å—Ç–æ–≤ + 5 –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
- ‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
  - ‚úÖ –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ—Å–Ω–æ–≤–Ω–æ–π TypeChecker
  - ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞–º–∏
  - ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Ç–æ—á–Ω–æ—Å—Ç—å –≤—ã–≤–æ–¥–∞ —Ç–∏–ø–æ–≤ –≤ LSP —Å–µ—Ä–≤–µ—Ä–µ

**Phase 5.0 (Production Readiness)** - üéØ –ü–õ–ê–ù–ò–†–£–ï–¢–°–Ø:

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: LSP Server Enhancement**
1. –£–ª—É—á—à–µ–Ω–∏–µ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–ª—è production LSP
2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è hover –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å —Ç–∏–ø–∞–º–∏ –∏–∑ flow-sensitive –∞–Ω–∞–ª–∏–∑–∞
3. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å union —Ç–∏–ø–∞–º–∏ –∏ –º–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
4. Real-time –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º–∏ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞–º–∏

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: Performance Optimization**  
5. –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–∏–ø–æ–≤
6. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
7. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –º–æ–¥—É–ª–µ–π (rayon integration)
8. Memory optimization –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–¥–æ–≤—ã—Ö –±–∞–∑

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: Advanced Features**
9. –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç–ª–∞–¥–∫–∏ –∏ –ø—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–∏–ø–æ–≤
10. Code actions –∏ quick fixes –≤ LSP (auto-type annotations)
11. Type hints –∏ inline type information
12. Semantic highlighting –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–∏–ø–æ–≤

**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: Integration & Tooling**
13. GitHub Actions –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –¥–ª—è CI/CD
14. VSCode extension —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –≤—Å–µ—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤
15. CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ 1–°
16. Reporting –∏ –º–µ—Ç—Ä–∏–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ —Ç–∏–ø–æ–≤

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –∏–∑ —Å—Ç–∞—Ä–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

–ü–æ–ª–µ–∑–Ω—ã–π –∫–æ–¥ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏–∑ `bsl_type_safety_analyzer`:
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1**: XML –ø–∞—Ä—Å–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (–∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥ –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2**: –ü–∞—Ä—Å–µ—Ä—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑ `docs_integration/`
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3**: –£—Ç–∏–ª–∏—Ç—ã `fs_utils.rs` –∏ `position.rs`
- **–ü–æ–∑–∂–µ**: VSCode extension, build tools

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–ß–µ—Å—Ç–Ω–∞—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç—å** - TypeResolution::Unknown –ª—É—á—à–µ —á–µ–º –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Inferred
2. **–≠–≤–æ–ª—é—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å** - –∫–∞–∂–¥–∞—è —Ñ–∞–∑–∞ –¥–æ–ª–∂–Ω–∞ –¥–∞–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
3. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å** - –Ω–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —á–µ—Ä–µ–∑ traits, –Ω–µ –º–µ–Ω—è—è —è–¥—Ä–æ
4. **–ì—Ä–∞–¥—É–∞–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞—á–∏–Ω–∞–µ–º —Å–æ —Å—Ç–∞—Ç–∏–∫–∏, –¥–æ–±–∞–≤–ª—è–µ–º –¥–∏–Ω–∞–º–∏–∫—É –≥–¥–µ –Ω—É–∂–Ω–æ
5. **–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤–∞–∂–µ–Ω** - –æ–¥–∏–Ω —Ç–∏–ø –º–æ–∂–µ—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É –≤ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö (—Ñ–∞—Å–µ—Ç—ã)

## üõ†Ô∏è –†–∞–±–æ—Ç–∞ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Rust —Å Cargo. –û—Å–Ω–æ–≤–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `tower-lsp` –∏ `lsp-types` –¥–ª—è LSP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- `quick-xml` –∏ `roxmltree` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ XML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- `tokio` –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –≤ LSP —Å–µ—Ä–≤–µ—Ä–µ
- `tracing` –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
- `serde` –¥–ª—è —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏/–¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- `clap` –¥–ª—è CLI –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
- `dashmap` –¥–ª—è concurrent HashMap
- `lru` –¥–ª—è –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è
- `rayon` –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `indicatif` –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- `tree-sitter` –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ BSL –∫–æ–¥–∞

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `cargo add <dependency>`
2. –ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –≤–µ—Ä—Å–∏–π
3. –ü—Ä–µ–¥–ø–æ—á–∏—Ç–∞–π—Ç–µ well-maintained crates

## üí° –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤
1. –ù–∞—á–Ω–∏—Ç–µ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤ `types.rs`
2. –û–±–Ω–æ–≤–∏—Ç–µ —Ä–µ–∑–æ–ª–≤–µ—Ä –≤ `resolution.rs`
3. –î–æ–±–∞–≤—å—Ç–µ —Ç–µ—Å—Ç—ã

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ–∞—Å–µ—Ç–∞–º–∏
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ `ContextResolver`
2. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–∞—Å–µ—Ç
3. –í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ –º–µ—Ç–æ–¥—ã/—Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–∞—Å–µ—Ç–∞

### –ü—Ä–∏ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ—Å—Ç–∏ —Ç–∏–ø–∞
1. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –≤—ã–≤–µ—Å—Ç–∏ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
2. –ï—Å–ª–∏ –Ω–µ —É–¥–∞—ë—Ç—Å—è - —Å–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç
3. –í–µ—Ä–Ω–∏—Ç–µ TypeResolution::Unknown —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º

### –ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª–∏–º–æ—Ä—Ñ–Ω–æ–π
2. –ï—Å–ª–∏ –¥–∞ - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `resolve_return_type()` —Å —Ç–∏–ø–∞–º–∏ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤
3. –£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏
4. –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ catalog*.html —Ñ–∞–π–ª–æ–≤

## üå≥ –ú–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ tree-sitter-bsl

### –ü–æ—á–µ–º—É tree-sitter-bsl?
Tree-sitter-bsl (https://github.com/alkoleft/tree-sitter-bsl) - —ç—Ç–æ –∑—Ä–µ–ª–∞—è –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ BSL, –∫–æ—Ç–æ—Ä–∞—è —Ä–µ—à–∞–µ—Ç –º–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞—à–µ–≥–æ —Ç–µ–∫—É—â–µ–≥–æ –ø–∞—Ä—Å–µ—Ä–∞:

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- **–ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥** - –æ–±–Ω–æ–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –∏–∑–º–µ–Ω–∏–≤—à–∏–µ—Å—è —á–∞—Å—Ç–∏ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è LSP)
- **–£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –æ—à–∏–±–∫–∞–º** - –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –ø–∞—Ä—Å–∏—Ç—å –¥–∞–∂–µ –ø—Ä–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö
- **–ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ BSL** - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –±–ª–æ–∫–∞—Ö, –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏, –ø—Ä–µ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä, async/await
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–π
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ C, –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π
- **–ó—Ä–µ–ª–æ—Å—Ç—å** - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ production VS Code —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è—Ö –¥–ª—è 1–°

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–∏–≥—Ä–∞—Ü–∏–∏ (Phase 4.5)** - ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û:
1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å tree-sitter 0.25 –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å tree-sitter-bsl
2. ‚úÖ –°–æ–∑–¥–∞–Ω –∞–¥–∞–ø—Ç–µ—Ä `TreeSitterAdapter` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ AST (src/parser/tree_sitter_adapter.rs)
3. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω trait `Parser` –¥–ª—è —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–∞—Ä—Å–µ—Ä–æ–≤ (src/parser/common.rs)
4. ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –Ω–æ–≤—ã–π –ø–∞—Ä—Å–µ—Ä
5. ‚úÖ Nom-based –ø–∞—Ä—Å–µ—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥

1. ‚úÖ ~~Union —Ç–∏–ø—ã —É–ø—Ä–æ—â–µ–Ω—ã - –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —Ç–∏–ø –≤–º–µ—Å—Ç–æ –ø–æ–ª–Ω–æ–≥–æ union~~ (**—Ä–µ—à–µ–Ω–æ –≤ Phase 4.6**)
2. ‚úÖ ~~–ú–µ–∂–º–æ–¥—É–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω~~ (**–º–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ Phase 4.6**)
3. –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–∏–Ω–≥ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å LSP
4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —à–∞–≥–∞ –≤ —Ü–∏–∫–ª–µ For –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ tree-sitter –∞–¥–∞–ø—Ç–µ—Ä–µ
5. **–ù–æ–≤—ã–µ –æ–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è (Phase 5.0):**
   - –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ flow-sensitive –∞–Ω–∞–ª–∏–∑–∞ –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –º–µ–∂–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏ LSP
   - –£–ª—É—á—à–µ–Ω–∏–µ —Ç–æ—á–Ω–æ—Å—Ç–∏ union —Ç–∏–ø–æ–≤ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
   - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bsl-gradual-types/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ core/           # –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã —Ç–∏–ø–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ parser/         # BSL –ø–∞—Ä—Å–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ query/          # –ü–∞—Ä—Å–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ 1–°
‚îÇ   ‚îú‚îÄ‚îÄ adapters/       # –ê–¥–∞–ø—Ç–µ—Ä—ã –≤–Ω–µ—à–Ω–∏—Ö –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ bin/            # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ integration/    # –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ fixtures/       # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ examples/           # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ docs/              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îî‚îÄ‚îÄ CLAUDE.md          # –≠—Ç–æ—Ç —Ñ–∞–π–ª
```

## üìà –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å 1000+ –æ–±—ä–µ–∫—Ç–∞–º–∏: < 1 —Å–µ–∫
- [x] –û—Ç–≤–µ—Ç LSP –Ω–∞ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: < 100ms
- [x] –ü–∞—Ä—Å–∏–Ω–≥ BSL —Ñ–∞–π–ª–∞ 10000 —Å—Ç—Ä–æ–∫: < 500ms
- [x] –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–∞ –∏–∑ 10 –∑–∞–ø—Ä–æ—Å–æ–≤: < 50ms
- [x] –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: < 200ms –¥–ª—è 100 —Ñ—É–Ω–∫—Ü–∏–π
- [x] Runtime –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ç–∏–ø–æ–≤
- [x] –ü–∞—Ä—Å–µ—Ä –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã
- [x] –ü–∞–∫–µ—Ç–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã —Å –∞–Ω–∞–ª–∏–∑–æ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π